<!doctype html>
<html lang="zh-Hans">
<head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="always">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="google-site-verification" content="m9HzlxEFMjeLY1dz5g98y0-93U1BVLaGlv_D4c984PI"/>
    <link rel="profile" href="http://gmpg.org/xfn/11"/>

    
    <title>mysql创建用户和配置远程连接 | 2Dosth</title>
    <meta name="description" content=""/>
    <meta name="keywords" content="MySQL,remote"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="mysql创建用户和配置远程连接"/>
    <meta property="og:description" content=""/>


    <meta property="og:locale" content="zh-Hans">
    <link href="https://fonts.googleapis.cn/css2?family=Arvo&family=Playball&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Arvo&family=Playball&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/style.css" type="text/css">
    <link rel="stylesheet" href="/static/css/code.css" type="text/css">
    
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c7f70ec56346e1ef095ec0104e479a46";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


    
</head>

<body data-new-gr-c-s-check-loaded="14.991.0">

<nav>
    <div class="site-name"><a href="/">2Dosth</a></div>
    <ul class="menu">
        <li><a href="https://twitter.com/OnePieceOwner" title="Twitter">
            <svg t="1664164595501" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 p-id="1601" width="20" height="20">
                <path d="M919.759462 318.994613c0-9.605475-0.184234-19.102577-0.608696-28.534655 41.060787-30.595551 76.68666-68.894629 104.863684-112.720738a403.247526 403.247526 0 0 1-120.68436 33.017692c43.401647-26.708567 76.68666-69.423851 92.415219-120.68436-40.638132 24.645865-85.589515 42.265535-133.383889 51.446549-38.295465-43.575045-92.944441-71.329413-153.358869-72.360764-116.027926-1.918205-210.084998 96.132418-210.084999 218.973404 0 17.460724 1.826088 34.394031 5.451171 50.745736-174.722834-11.243716-329.55016-102.190479-433.116978-239.293373-18.071226 32.847907-28.438925 71.237296-28.438925 112.377556 0 77.811934 37.090717 146.970271 93.44657 187.779994-34.500598-1.560574-66.819283-12.009553-95.166091-29.141545v2.85744c0 108.752474 72.440238 199.870827 168.560013 221.13003-17.621477 5.012259-36.207475 7.62044-55.322696 7.526516a191.542349 191.542349 0 0 1-39.500214-4.325895c26.708567 89.120675 104.332655 154.231274 196.231295 156.400543-71.923659 59.635948-162.525433 95.258208-260.892145 95.00895-16.960401 0-33.720311-1.137918-50.15149-3.200621 93.011271 63.80109 203.418242 100.960443 322.104923 100.960443 386.350343 0.092117 597.636477-336.191629 597.636477-627.962902z"
                      fill="#2c2c2c" p-id="1602"></path>
            </svg>
        </a></li>

        <li><a href="/tags.html" title="标签">
            <svg t="1664165544852" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 p-id="31034" width="20" height="20">
                <path d="M870.4 448a64 64 0 0 0 0-128h-114.56l26.88-148.48a64 64 0 0 0-126.08-23.04l-32 171.52h-156.8l26.88-148.48a64 64 0 0 0-126.08-23.04l-32 171.52H198.4a64 64 0 1 0 0 128h116.16l-23.36 128H153.6a64 64 0 0 0 0 128h114.56l-26.88 148.48a64 64 0 1 0 126.08 23.04l32-171.52h157.76l-26.88 148.48a64 64 0 1 0 126.08 23.04l32-171.52h137.28a64 64 0 1 0 0-128h-116.16l23.36-128z m-291.2 128h-157.76l23.36-128h157.76z"
                      fill="#2c2c2c" p-id="31035"></path>
            </svg>
        </a>
        </li>

        <li><a href="/links.html" title="友情链接">
            <svg t="1664161702390" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="8985"
                 width="20" height="20">
                <path d="M339.57 697c1 0.86 1.79 1 1.16 0.46a21.38 21.38 0 0 0-2-1.18c0.27 0.27 0.56 0.52 0.84 0.72zM428.33 696.49c-0.5 0.34-1 0.75-1.45 1.13a5.06 5.06 0 0 0 0.81-0.58zM393.21 711.57c3-0.3 1.54-0.23-0.07 0h-0.28zM392.86 711.6h-0.07c-0.43 0.06-0.86 0.14-1.2 0.22 0.41-0.09 0.84-0.16 1.27-0.22zM338.73 696.32l-0.06-0.06-0.56-0.28zM317.65 668.51c0.42 1.14 1.06 1.81 0.82 1.11-0.39-0.8-0.82-1.58-1.27-2.34zM542.41 582.32a3.85 3.85 0 0 0 0.76-1.21 18.8 18.8 0 0 0-1.45 2zM552.76 564.32l-0.35 0.57a2 2 0 0 0-0.08 0.22c0.14-0.27 0.28-0.54 0.43-0.79zM429.15 696l-0.58 0.29-0.24 0.22a5.54 5.54 0 0 1 0.82-0.51zM556.72 526.64v0.94c0 0.29 0.12 0.6 0.17 0.91a15 15 0 0 1-0.17-1.85zM557 528.94l-0.09-0.45c0.05 0.3 0.09 0.59 0.11 0.88s0 0.64 0.08 1a6.14 6.14 0 0 0-0.1-1.43zM541.72 583.12l-0.08 0.09c-0.09 0.18-0.19 0.37-0.28 0.57a7.16 7.16 0 0 1 0.36-0.66zM317.2 667.28v-0.07l-0.36-0.57z"
                      p-id="8986"></path>
                <path d="M552.33 565.11c-0.42 0.77-0.8 1.59-1.16 2.43a3.83 3.83 0 0 0 0.76-1.35c0.13-0.36 0.26-0.72 0.4-1.08zM312.69 630.75c0.05-0.3 0.11-0.6 0.16-0.89s0-0.58 0-0.9a14 14 0 0 1-0.16 1.79zM375.67 711.83l-0.38-0.08zM597.65 326.45l-1 0.71c-2.73 1.92-0.1 0.16 1-0.71zM374.05 711.57h0.42c-1.73-0.22-3.61-0.32-0.42 0zM706.72 411.9l0.55-1.14a3.69 3.69 0 0 0 0.39-1.19c0 0.16-0.11 0.32-0.17 0.48-0.18 0.5-0.49 1.2-0.77 1.85zM706.72 411.9l-0.13 0.26c0 0.16-0.06 0.31-0.09 0.48a4.3 4.3 0 0 1 0.22-0.74z"
                      p-id="8987"></path>
                <path d="M512 65C265.13 65 65 265.13 65 512s200.13 447 447 447 447-200.13 447-447S758.87 65 512 65z m91.65 492.62c-3.82 26.66-17.91 49.76-36.69 68.54l-83.15 83.15C472.15 721 461 733 446.92 741.88c-32.36 20.59-74.27 23.52-109.41 8.68S275 704.24 267.1 666.7c-8.17-38.92 2.64-79.4 30-108.46 21.52-22.83 44.42-44.48 66.6-66.66 9.48-9.48 24.35-8.79 33.92 0s8.88 25 0 33.91l-2.53 2.51L356 567.12l-18.34 18.33c-1.41 1.41-2.83 2.82-4.23 4.24-1.16 1.16-2.3 2.33-3.41 3.54s-2.22 2.87-3.47 4.09l-0.45 0.63a92.07 92.07 0 0 0-6.27 10.27c-0.72 1.36-1.37 2.74-2 4.13-0.21 0.54-0.45 1.08-0.65 1.6a96.77 96.77 0 0 0-3.51 11.91c-0.3 1.33-0.55 2.66-0.8 4-0.06 3.35-0.31 3.57-0.36 2.8a97.31 97.31 0 0 0-0.29 10.66c0 1.6 0.13 3.19 0.25 4.79l0.12 1.25c0.88 3.74 1.38 7.56 2.44 11.28 0.51 1.77 1.08 3.53 1.69 5.27 0.15 0.43 0.31 0.87 0.48 1.3a14 14 0 0 1 1.29 2.41c1.27 2.53 2.35 5.22 3.79 7.62 1 1.63 2 3.23 3.05 4.79 0.46 0.68 4.1 6.28 1.93 2.78-2-3.29 0.24 0.21 0.87 0.94s1.28 1.46 1.93 2.18q1.48 1.64 3 3.19c1.39 1.38 2.81 2.72 4.28 4l1.3 1.12a11.4 11.4 0 0 1 2.06 1.24c2.51 1.65 4.92 3.71 7.46 5.17 1.62 0.93 3.27 1.82 4.95 2.65 0.27 0.14 1.27 0.61 2.22 1.06 0.6 0.25 1.32 0.55 1.64 0.67 0.87 0.31 1.74 0.62 2.61 0.91 1.75 0.59 3.52 1.12 5.29 1.61 3.26 0.88 6.6 1.31 9.87 2.06 0.67 0.07 1.34 0.13 2 0.18 1.82 0.13 3.64 0.2 5.47 0.23a97.37 97.37 0 0 0 10.53-0.43l0.35-0.05c0.4-0.06 0.79-0.11 1.16-0.18q2.71-0.48 5.39-1.13a95.25 95.25 0 0 0 10.57-3.2l0.61-0.25c3.89-2 1.62-0.71 0 0l-1.18 0.59c0.62-0.31 1.28-0.56 1.91-0.86q2.55-1.17 5-2.5a94.64 94.64 0 0 0 9.65-5.94c0.2-0.14 0.41-0.31 0.62-0.47-0.91 0.51-1 0 1.69-1.35 1.18-1 2.35-2 3.49-3.1 0.79-0.75 1.56-1.51 2.34-2.28 8.67-8.58 17.25-17.26 25.88-25.88q37.55-37.54 75.08-75.08c1.42-1.42 2.83-2.84 4.18-4.32q1.07-1.18 2.1-2.4c1.13-2.23 1.66-2.56 1.53-2.1 0.53-0.67 1.07-1.33 1.51-2a93.61 93.61 0 0 0 5.38-9.12c0.4-0.78 0.75-1.62 1.11-2.46-0.27 0.24-0.15-0.41 1.24-2.65l0.48-1.31a95 95 0 0 0 3-10.6c0.43-1.92 0.67-3.9 1.07-5.82 0-0.45 0.09-0.91 0.13-1.37a95.38 95.38 0 0 0 0.23-11c-0.05-1.5-0.15-3-0.27-4.49 0 0.77-0.3 0.57-0.36-2.76-0.6-3.16-1.27-6.29-2.16-9.38-0.64-2.21-1.36-4.41-2.15-6.57-0.18-0.49-0.41-1-0.61-1.51C550.3 507 548.75 504 547 501c-1.1-1.83-2.27-3.61-3.49-5.36-0.26-0.37-0.53-0.73-0.8-1.09-2-2.31-4-4.64-6.18-6.82-2-2-4.14-3.88-6.28-5.75a6.14 6.14 0 0 1-0.51-0.51c-0.48-0.31-1-0.6-1.29-0.83a99 99 0 0 0-11.28-6.77c-11.89-6.18-14.43-21.79-8.61-32.81 6.26-11.84 21.69-14.39 32.81-8.61a122 122 0 0 1 26.61 19c29.2 27.22 41.26 67.16 35.67 106.17z m143.22-118.87c-9.37 18.46-24.65 32.38-39.06 46.8l-32.92 32.91c-9.47 9.48-24.34 8.79-33.91 0s-8.88-25 0-33.91l2.66-2.66 37.82-37.82c3.36-3.37 6.75-6.72 10.1-10.1 1.38-1.4 2.73-2.82 4-4.29 0.47-0.53 2-2.44 2.46-3 0.58-0.81 1.15-1.6 1.3-1.83q1.39-2.06 2.69-4.18c1.68-2.77 3.13-5.63 4.55-8.53 0.53-2.82 1.14-3.28 1.07-2.59 0.49-1.36 1-2.73 1.39-4.11a93.74 93.74 0 0 0 2.65-10.69c0.07-0.35 0.13-0.69 0.19-1 0.13-1.38 0.32-2.77 0.41-4.15a95.23 95.23 0 0 0 0.08-10.95c-0.08-1.59-0.2-3.18-0.36-4.76-0.65-3.54-1.38-7-2.38-10.51q-0.76-2.66-1.68-5.27c-0.16-0.45-0.62-1.63-1-2.53-0.56-1.21-1.31-2.81-1.53-3.26-0.74-1.46-1.53-2.9-2.35-4.33-1.66-2.89-3.53-5.64-5.44-8.37l-1.12-1.35q-1.9-2.22-3.95-4.32a95 95 0 0 0-7-6.5l-0.24-0.2c-3.32-2.26-1.21-1 0 0l1.15 0.79c-0.59-0.4-1.15-0.86-1.73-1.28q-2.31-1.68-4.72-3.21a92.24 92.24 0 0 0-9.21-5.16l-1-0.5A49.63 49.63 0 0 1 665 316a90.23 90.23 0 0 0-9.3-2.6c-1.73-0.39-3.48-0.68-5.23-1l-0.59-0.07a95 95 0 0 0-10.26-0.4q-3.09 0-6.16 0.28l-1.48 0.15c-1 0.15-2.53 0.39-3 0.48-1.8 0.35-3.59 0.76-5.37 1.21a110 110 0 0 0-10.48 3.34l-0.09 0.05q-2.22 1-4.4 2.16a94.3 94.3 0 0 0-9.64 5.9c-0.34 0.23-0.66 0.46-1 0.7-0.58 1.08-2.86 2.32-3.78 3.15-1.59 1.42-3.11 2.92-4.63 4.43q-13.1 13.05-26.15 26.15l-72.61 72.61-2.43 2.46c-0.77 0.78-1.54 1.55-2.28 2.35-1.34 1.42-2.6 2.89-3.87 4.36l-0.2 0.23a95.52 95.52 0 0 0-6.09 9.57 90.25 90.25 0 0 0-2.28 4.36c-0.17 0.34-0.33 0.69-0.49 1-0.54 3.28-2.57 6.89-3.44 10.1s-1.41 6.25-2 9.4c0 0.37-0.07 0.75-0.1 1.12a90.66 90.66 0 0 0-0.31 5.47 95.11 95.11 0 0 0 0.25 10.27c0 0.38 0.07 0.76 0.11 1.14 0.37 1.51 0.48 3.2 0.79 4.7a93.43 93.43 0 0 0 2.46 9.33c0.56 1.76 1.23 3.47 1.85 5.2 0.1 0.24 0.2 0.48 0.31 0.7a94.37 94.37 0 0 0 5 9.28c1.12 1.81 2.29 3.59 3.53 5.33l0.33 0.45c2.05 2.33 4 4.68 6.24 6.88 9.48 9.48 8.79 24.34 0 33.92s-25 8.88-33.92 0a126.55 126.55 0 0 1-16.47-20.58C419 520.48 414 481.9 425.07 449c7.09-21.1 19.61-38.11 35.15-53.65l79.83-79.84c9.93-9.92 19.46-19.92 30.68-28.44 28-21.28 65.87-27.8 99.77-19.38 33.68 8.37 64.31 33 78.47 64.85 15.28 34.35 15.03 72.46-2.1 106.21z"
                      p-id="8988"></path>
                <path d="M328.07 595.22c0.16-0.23 0.2-0.27 0 0zM312.69 630.75c0 0.17-0.07 0.34-0.1 0.51a6.17 6.17 0 0 0-0.1 1.4c0-0.32 0.05-0.65 0.08-1s0.07-0.59 0.12-0.91z"
                      p-id="8989"></path>
            </svg>
        </a></li>

        <li><a href="mailto:intbleem@gmail.com" title="邮件">
            <svg t="1664164974344" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 p-id="5446" width="20" height="20">
                <path d="M869.065302 152.648632l-715.495694 0c-49.195445 0-89.436962 40.532135-89.436962 90.085738l0 540.501124c0 49.548486 40.241516 90.085738 89.436962 90.085738l715.495694 0c49.196469 0 89.436962-40.537252 89.436962-90.085738L958.502263 242.73437C958.502263 193.180767 918.260747 152.648632 869.065302 152.648632L869.065302 152.648632 869.065302 152.648632zM869.065302 332.819085l-357.747847 225.208205-357.747847-225.208205 0-90.085738 357.747847 225.208205 357.747847-225.208205L869.065302 332.819085 869.065302 332.819085 869.065302 332.819085zM869.065302 332.819085"
                      p-id="5447" fill="#2c2c2c"></path>
            </svg>
        </a></li>

    </ul>
    <hr>
</nav>



<main>
    
    <div class="header-line"></div>
    <div class="article-meta">
        <h1 class="title">mysql创建用户和配置远程连接</h1>
        <div class="article-attrs">

            <span class="date"><time>Dec 29, 2020</time></span>

            <div class="article-tags">
                <ul>
                    
                        <li>
                            <a href="/tag/MySQL.html"># MySQL</a>
                        </li>
                    
                        <li>
                            <a href="/tag/remote.html"># remote</a>
                        </li>
                    
                </ul>
            </div>

        </div>
    </div>

    <div class="article-body">
        <h2>创建远程连接用户</h2>
<p>在某些情况下，可能别人需要连接你的数据库进行操作，出于安全考虑，我们需要新建一个用户，让该用户只具有一部分的操作权限操作数据库。</p>
<p>当然如果只有你一个人使用这个数据库的话，也可以跳过这一步，直接选择root用户来操作。</p>
<p><strong>创建用户</strong></p>
<p>使用help命令查看如何创建用户</p>
<div class="codehilite"><pre><span></span><code><span class="nb">help</span> create user
</code></pre></div>


<div class="codehilite"><pre><span></span><code>Name: <span class="s1">&#39;CREATE USER&#39;</span>
Description:
Syntax:
CREATE USER user_specification
    <span class="o">[</span>, user_specification<span class="o">]</span> ...

user_specification:
    user
    <span class="o">[</span>
        IDENTIFIED BY <span class="o">[</span>PASSWORD<span class="o">]</span> <span class="s1">&#39;password&#39;</span>
      <span class="p">|</span> IDENTIFIED WITH auth_plugin <span class="o">[</span>AS <span class="s1">&#39;auth_string&#39;</span><span class="o">]</span>
    <span class="o">]</span>
</code></pre></div>


<p>根据帮助说明，接下来我们来创建用户</p>
<div class="codehilite"><pre><span></span><code>create user <span class="s1">&#39;zjc&#39;</span>@<span class="s1">&#39;localhost&#39;</span> <span class="c1"># 创建一个用户zjc，不需要密码即可登录，但只可以在本机登录</span>
create user <span class="s1">&#39;zjc&#39;</span>@<span class="s1">&#39;%&#39;</span>   <span class="c1"># 创建一个用户zjc，不需要密码即可登录，可以在任意主机登录</span>
create user <span class="s1">&#39;zjc&#39;</span>@<span class="s1">&#39;%&#39;</span> identified by <span class="s1">&#39;123456&#39;</span>    <span class="c1"># 创建一个用户zjc，登录时需要密码123456才可以登录，会自动将密码加密</span>
create user <span class="s1">&#39;zjc&#39;</span>@<span class="s1">&#39;%&#39;</span> identified by password <span class="s1">&#39;123456&#39;</span> <span class="c1"># 创建一个用户zjc，登录时需要密码123456才可以登录，会将密码明文存储</span>
</code></pre></div>


<p><strong>修改密码</strong></p>
<p>命令：</p>
<div class="codehilite"><pre><span></span><code><span class="nb">set</span> password <span class="k">for</span> <span class="s1">&#39;username&#39;</span>@<span class="s1">&#39;host&#39;</span> <span class="o">=</span> PASSWORD<span class="o">(</span><span class="s1">&#39;newpassword&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div>


<p>查看帮助命令查看详情</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nb">help</span> <span class="nb">set</span> password
Name: <span class="s1">&#39;SET PASSWORD&#39;</span>
Description:
Syntax:
SET PASSWORD <span class="o">[</span>FOR user<span class="o">]</span> <span class="o">=</span>
    <span class="o">{</span>
        PASSWORD<span class="o">(</span><span class="s1">&#39;cleartext password&#39;</span><span class="o">)</span>
      <span class="p">|</span> OLD_PASSWORD<span class="o">(</span><span class="s1">&#39;cleartext password&#39;</span><span class="o">)</span>
      <span class="p">|</span> <span class="s1">&#39;encrypted password&#39;</span>
    <span class="o">}</span>
</code></pre></div>


<p>修改密码：</p>
<div class="codehilite"><pre><span></span><code><span class="nb">set</span> password <span class="k">for</span> <span class="s1">&#39;zjc&#39;</span>@<span class="s1">&#39;%&#39;</span> <span class="o">=</span> PASSWORD<span class="o">(</span><span class="s2">&quot;654321&quot;</span><span class="o">)</span>
</code></pre></div>


<p><strong>删除用户</strong></p>
<p>命令：</p>
<div class="codehilite"><pre><span></span><code>drop user username
</code></pre></div>


<h2>用户授权</h2>
<p><strong>查看用户目前的权限</strong></p>
<div class="codehilite"><pre><span></span><code>&gt; show grants <span class="k">for</span> zjc<span class="p">;</span>
+---------------------------------+
<span class="p">|</span> Grants <span class="k">for</span> zjc@%                <span class="p">|</span>
+---------------------------------+
<span class="p">|</span> GRANT USAGE ON *.* TO <span class="sb">`</span>zjc<span class="sb">`</span>@<span class="sb">`</span>%<span class="sb">`</span> <span class="p">|</span>
+---------------------------------+
</code></pre></div>


<p>USAGE相当于一个占位符，表示目前zjc用户什么权限都没有，需要我们给他授予权限</p>
<p><strong>授权该用户权限</strong></p>
<p>命令：</p>
<div class="codehilite"><pre><span></span><code>grant privileges ON databasename.tablename to <span class="s1">&#39;username&#39;</span>@<span class="s1">&#39;host&#39;</span>
</code></pre></div>


<p>同样使用help命令详情</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nb">help</span> grant
Name: <span class="s1">&#39;GRANT&#39;</span>
Description:
Syntax:
GRANT
    priv_type <span class="o">[(</span>column_list<span class="o">)]</span>
      <span class="o">[</span>, priv_type <span class="o">[(</span>column_list<span class="o">)]]</span> ...
    ON <span class="o">[</span>object_type<span class="o">]</span> priv_level
    TO user_specification <span class="o">[</span>, user_specification<span class="o">]</span> ...
    <span class="o">[</span>REQUIRE <span class="o">{</span>NONE <span class="p">|</span> ssl_option <span class="o">[[</span>AND<span class="o">]</span> ssl_option<span class="o">]</span> ...<span class="o">}]</span>
    <span class="o">[</span>WITH with_option ...<span class="o">]</span>

GRANT PROXY ON user_specification
    TO user_specification <span class="o">[</span>, user_specification<span class="o">]</span> ...
    <span class="o">[</span>WITH GRANT OPTION<span class="o">]</span>

object_type:
    TABLE
  <span class="p">|</span> FUNCTION
  <span class="p">|</span> PROCEDURE

priv_level:
    *
  <span class="p">|</span> *.*
  <span class="p">|</span> db_name.*
  <span class="p">|</span> db_name.tbl_name
  <span class="p">|</span> tbl_name
  <span class="p">|</span> db_name.routine_name

user_specification:
    user
    <span class="o">[</span>
        IDENTIFIED BY <span class="o">[</span>PASSWORD<span class="o">]</span> <span class="s1">&#39;password&#39;</span>
      <span class="p">|</span> IDENTIFIED WITH auth_plugin <span class="o">[</span>AS <span class="s1">&#39;auth_string&#39;</span><span class="o">]</span>
    <span class="o">]</span>

ssl_option:
    SSL
  <span class="p">|</span> X509
  <span class="p">|</span> CIPHER <span class="s1">&#39;cipher&#39;</span>
  <span class="p">|</span> ISSUER <span class="s1">&#39;issuer&#39;</span>
  <span class="p">|</span> SUBJECT <span class="s1">&#39;subject&#39;</span>

with_option:
    GRANT OPTION
  <span class="p">|</span> MAX_QUERIES_PER_HOUR count
  <span class="p">|</span> MAX_UPDATES_PER_HOUR count
  <span class="p">|</span> MAX_CONNECTIONS_PER_HOUR count
  <span class="p">|</span> MAX_USER_CONNECTIONS count
</code></pre></div>


<ul>
<li>privileges：用户的操作权限，如SELECT，INSERT，UPDATE等，如果要授予所的权限则使用ALL</li>
<li>databasename：数据库名</li>
<li>tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用<em>表示，如</em>.*</li>
</ul>
<p>给用户zjc授予权限</p>
<div class="codehilite"><pre><span></span><code>grant all on *.* to &#39;zjc&#39;@&#39;%&#39;;  
</code></pre></div>


<p>刷新权限</p>
<div class="codehilite"><pre><span></span><code>flush privileges;
</code></pre></div>


<p><strong>取消该用户的权限</strong></p>
<p>命令：</p>
<div class="codehilite"><pre><span></span><code>revoke privilege ON databasename.tablename FROM <span class="s1">&#39;username&#39;</span>@<span class="s1">&#39;host&#39;</span><span class="p">;</span>
</code></pre></div>


<p>help查看详情</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nb">help</span> revoke
Name: <span class="s1">&#39;REVOKE&#39;</span>
Description:
Syntax:
REVOKE
    priv_type <span class="o">[(</span>column_list<span class="o">)]</span>
      <span class="o">[</span>, priv_type <span class="o">[(</span>column_list<span class="o">)]]</span> ...
    ON <span class="o">[</span>object_type<span class="o">]</span> priv_level
    FROM user <span class="o">[</span>, user<span class="o">]</span> ...

REVOKE ALL PRIVILEGES, GRANT OPTION
    FROM user <span class="o">[</span>, user<span class="o">]</span> ...

REVOKE PROXY ON user
    FROM user <span class="o">[</span>, user<span class="o">]</span> ...
</code></pre></div>


<p>说明：同上面的授权部分</p>
<h2>配置远程链接</h2>
<p>找到配置文件中的[mysqld]一项</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># this is only for the mysqld standalone daemon</span>
<span class="o">[</span>mysqld<span class="o">]</span>

<span class="c1">#</span>
<span class="c1"># * Basic Settings</span>
<span class="c1">#</span>
<span class="nv">user</span>                    <span class="o">=</span> mysql
pid-file                <span class="o">=</span> /run/mysqld/mysqld.pid
<span class="nv">socket</span>                  <span class="o">=</span> /run/mysqld/mysqld.sock
<span class="c1">#port                   = 3306</span>
<span class="nv">basedir</span>                 <span class="o">=</span> /usr
<span class="nv">datadir</span>                 <span class="o">=</span> /var/lib/mysql
<span class="nv">tmpdir</span>                  <span class="o">=</span> /tmp
lc-messages-dir         <span class="o">=</span> /usr/share/mysql
<span class="c1">#skip-external-locking</span>
skip-name-resolve

<span class="c1"># Instead of skip-networking the default is now to listen only on</span>
<span class="c1"># localhost which is more compatible and is not less secure.</span>
<span class="c1"># bind-address            = 127.0.0.1</span>
</code></pre></div>


<p>将<strong>bind-address</strong> 注释掉,，然后重启数据库即可</p>
<div class="codehilite"><pre><span></span><code>systemctl restart mysql
</code></pre></div>


<p><strong>问题记录</strong></p>
<p>我在尝试用 navicat连接的时候，出现（2013，XXXXXXXX）的错误，这样是由于mysql在接收到客户端链接的时候需要对dns进行反向解析，由于我实在局域网内，所有反向解析是不可能成功的。</p>
<p>解决办法有两种：</p>
<ol>
<li>把client的ip写在mysql服务器的/etc/hosts文件里，随便给个名字就可以了。</li>
<li>在 my.cnf 中加入 <strong>skip-name-resolve</strong> 。</li>
</ol>
<p>于第一种方法比较笨，也不实用，那么 skip-name-resolve 选项可以禁用dns解析，但是，这样不能在mysql的授权表中使用主机名了，只能使用IP。</p>
<p>什么是mysql的dns反解析</p>
<p>mysql接收到连接请求后，获得的是客户端的ip，为了更好的匹配mysql.user里的权限记录（某些是用hostname定义的）。</p>
<p>如果mysql服务器设置了dns服务器，并且客户端ip在dns上并没有相应的hostname，那么这个过程很慢，导致连接等待。</p>
<p><strong>官方解释</strong></p>
<blockquote>
<p><em>How MySQL</em>
<em>uses DNS When a new thread connects to mysqld, mysqld will</em>
<em>spawn a new thread to handle the request. This thread will first check</em>
<em>if the hostname is in the hostname cache. If not the thread will call</em>
<em>gethostbyaddr_r() and gethostbyname_r() to resolve the hostname. If</em>
<em>the operating system doesn’t support the above thread-safe calls, the</em>
<em>thread will lock a mutex and call gethostbyaddr() and gethostbyname()</em>
<em>instead. Note that in this case no other thread can resolve other</em>
<em>hostnames that is not in the hostname cache until the first thread is</em>
<em>ready. You can disable DNS host lookup by starting mysqld with</em>
<em>–skip-name-resolve. In this case you can however only use IP names in</em>
<em>the MySQL privilege tables. If you have a very slow DNS and many</em>
<em>hosts, you can get more performance by either disabling DNS lookop</em>
<em>with –skip-name-resolve or by increasing the HOST_CACHE_SIZE define</em>
<em>(default: 128) and recompile mysqld. You can disable the hostname</em>
<em>cache with –skip-host-cache. You can clear the hostname cache with</em>
<em>FLUSH HOSTS or mysqladmin flush-hosts. If you don’t want to allow</em>
<em>connections over TCP/IP, you can do this by starting mysqld with</em>
<em>–skip-networking.</em></p>
</blockquote>
<p>根据文档说明，如果你的mysql主机查询DNS很慢或是有很多客户端主机时会导致连接很慢，由于我们的开发机器是不能够连接外网的，所以DNS解析是不可能完成的，从而也就明白了为什么连接那么慢了。同时，请注意在增加该配置参数后，mysql的授权表中的host字段就不能够使用域名而只能够使用 ip地址了，因为这是禁止了域名解析的结果。</p>
    </div>





</main>

<footer>
    &copy; 2020-2022 ·
    <a href="/sitemap.xml">Sitemap</a> ·
    
    
    Powered by <a href="https://github.com/Cocojcc/zogn">zogn</a>
</footer>


</body>
</html>