<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <title>Run Elasticsearch by docker | Chenn's Personal Website</title>
    <meta name="description" content="**1. Download the docker image of Elasticsearch, taking version 7.6.0 as an example**

```bash
	docker pull elasticsearch:7.6.0
```

**2. Create a container and run it.**

if your command..."/>
    <meta name="keywords" content="Elasticsearch,Docker,技术笔记"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Run Elasticsearch by docker"/>
    <meta property="og:description" content="**1. Download the docker image of Elasticsearch, taking version 7.6.0 as an example**

```bash
	docker pull elasticsearch:7.6.0
```

**2. Create a container and run it.**

if your command..."/>
    <meta property="og:url" content="https://chenn.me/post/2021/docker-elasticsearch.html">
    <meta property="og:site_name" content="Chenn's Personal Website">
    <meta property="article:tag" content="Elasticsearch,Docker,技术笔记">
    <meta property="article:category" content="技术">
    <meta property="article:date" content="2021-04-30">

    <link rel="canonical" href="https://chenn.me/post/2021/docker-elasticsearch.html">
    <style>
        blockquote {
            padding: 0 0 0 10px;
            margin: 0;
            border-left: 2px solid #615b5b;
        }

        pre {
            border: 1px solid #ccc;
            padding: 1em;
            overflow-x: auto;
            background: #f7f7f7;
            line-height: 125%;
        }

        p code {
            padding: 1px 4px;
            color: #d14;
            background: #faf9f9;
            border: 1px solid #ebeaea;
            border-radius: 1px;
        }

        td.linenos pre {
            color: #000000;
            background-color: #f0f0f0;
            padding-left: 5px;
            padding-right: 5px;
        }

        span.linenos {
            color: #000000;
            background-color: #f0f0f0;
            padding-left: 5px;
            padding-right: 5px;
        }

        td.linenos pre.special {
            color: #000000;
            background-color: #ffffc0;
            padding-left: 5px;
            padding-right: 5px;
        }

        span.linenos.special {
            color: #000000;
            background-color: #ffffc0;
            padding-left: 5px;
            padding-right: 5px;
        }

        .codehilite .hll {
            background-color: #ffffcc
        }

        .codehilite {
            background: rgb(248, 248, 248);
        }

        .codehilite .c {
            color: #177500
        }

        .codehilite .err {
            color: #000000
        }

        .codehilite .k {
            color: #A90D91
        }

        .codehilite .l {
            color: #1C01CE
        }

        .codehilite .n {
            color: #000000
        }

        .codehilite .o {
            color: #000000
        }

        .codehilite .ch {
            color: #177500
        }

        .codehilite .cm {
            color: #177500
        }

        .codehilite .cp {
            color: #633820
        }

        .codehilite .cpf {
            color: #177500
        }

        .codehilite .c1 {
            color: #177500
        }

        .codehilite .cs {
            color: #177500
        }

        .codehilite .kc {
            color: #A90D91
        }

        .codehilite .kd {
            color: #A90D91
        }

        .codehilite .kn {
            color: #A90D91
        }

        .codehilite .kp {
            color: #A90D91
        }

        .codehilite .kr {
            color: #A90D91
        }

        .codehilite .kt {
            color: #A90D91
        }

        .codehilite .ld {
            color: #1C01CE
        }

        .codehilite .m {
            color: #1C01CE
        }

        .codehilite .s {
            color: #C41A16
        }

        .codehilite .na {
            color: #836C28
        }

        .codehilite .nb {
            color: #A90D91
        }

        .codehilite .nc {
            color: #3F6E75
        }

        .codehilite .no {
            color: #000000
        }

        .codehilite .nd {
            color: #000000
        }

        .codehilite .ni {
            color: #000000
        }

        .codehilite .ne {
            color: #000000
        }

        .codehilite .nf {
            color: #000000
        }

        .codehilite .nl {
            color: #000000
        }

        .codehilite .nn {
            color: #000000
        }

        .codehilite .nx {
            color: #000000
        }

        .codehilite .py {
            color: #000000
        }

        .codehilite .nt {
            color: #000000
        }

        .codehilite .nv {
            color: #000000
        }

        .codehilite .ow {
            color: #000000
        }

        .codehilite .mb {
            color: #1C01CE
        }

        .codehilite .mf {
            color: #1C01CE
        }

        .codehilite .mh {
            color: #1C01CE
        }

        .codehilite .mi {
            color: #1C01CE
        }

        .codehilite .mo {
            color: #1C01CE
        }

        .codehilite .sa {
            color: #C41A16
        }

        .codehilite .sb {
            color: #C41A16
        }

        .codehilite .sc {
            color: #2300CE
        }

        .codehilite .dl {
            color: #C41A16
        }

        .codehilite .sd {
            color: #C41A16
        }

        .codehilite .s2 {
            color: #C41A16
        }

        .codehilite .se {
            color: #C41A16
        }

        .codehilite .sh {
            color: #C41A16
        }

        .codehilite .si {
            color: #C41A16
        }

        .codehilite .sx {
            color: #C41A16
        }

        .codehilite .sr {
            color: #C41A16
        }

        .codehilite .s1 {
            color: #C41A16
        }

        .codehilite .ss {
            color: #C41A16
        }

        .codehilite .bp {
            color: #5B269A
        }

        .codehilite .fm {
            color: #000000
        }

        .codehilite .vc {
            color: #000000
        }

        .codehilite .vg {
            color: #000000
        }

        .codehilite .vi {
            color: #000000
        }

        .codehilite .vm {
            color: #000000
        }

        .codehilite .il {
            color: #1C01CE
        }
    </style>


    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://chenn.me/feed.xml">

    

    <style>
        body {
            margin: 4% 4%;
            line-height: 1.68;
            word-wrap: break-word;
        }

        body > * {
            max-width: 46em;
            margin: auto;
        }

        img {
            max-width: 100%;
        }

    </style>
</head>

<body>


<main>

    
    <a href="/">..</a>
    <br>


    
    <article>
        <h1>Run Elasticsearch by docker</h1>
        <p><strong>1. Download the docker image of Elasticsearch, taking version 7.6.0 as an example</strong></p>
<pre class="codehilite"><code class="language-bash">    docker pull elasticsearch:7.6.0
</code></pre>

<p><strong>2. Create a container and run it.</strong></p>
<p>if your command is:</p>
<pre class="codehilite"><code class="language-bash">   docker run -d --name es -p 9200:9200 -p 9300:9300 elasticsearch:7.6.0
</code></pre>

<p>It may exit shortly after starting. To find out the reason, view logs by log command:</p>
<pre class="codehilite"><code class="language-bash">   docker logs es
</code></pre>

<p>Some error message like <code>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</code> may appear. Go the following command:</p>
<pre class="codehilite"><code class="language-bash">   # change the variable
   sysctl -w vm.max_map_count=262144
   # check the variable value
   sysctl -n vm.max_map_count
</code></pre>

<p>If the error message is <code>the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</code>, which means the container has wrong configuration and can be corrected by setting those prompted environment variables or setting to standalone development mode by <code>discovery.type=single-node</code>.</p>
<p>In short, the correct command is:</p>
<pre class="codehilite"><code class="language-bash">   docker run -d --name es -p 9200:9200 -p 9300:9300 -e discovery.type=single-node elasticsearch:7.6.0
</code></pre>

<h2>Using IK Chinese segmentation plugin.</h2>
<p><strong>1. Download the plugin.</strong></p>
<p>The plugin version must equal the Elasticsearch version. Version 7.6.0 download link is <a href="https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.0/elasticsearch-analysis-ik-7.6.0.zip">https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.0/elasticsearch-analysis-ik-7.6.0.zip</a>。</p>
<p><strong>2. Unzip to an empty directory, which is referred to as  <em><code>$IK</code></em></strong>.</p>
<p><strong>3. Copy the <em><code>$IK</code></em> into the directory of the container's plugin.</strong></p>
<pre class="codehilite"><code class="language-bash">   docker cp $IK es:/usr/share/elasticsearch/plugins/ik
</code></pre>

<p>This plugin provides analyzer and tokenizer named <code>ik_smart</code> and <code>ik_max_word</code> where <code>ik_smart</code> splits by the coarsest granularity, while <code>ik_max_word</code> will exhaust all kinds of split combinations.</p>
<p>Find more info at <a href="https://github.com/medcl/elasticsearch-analysis-ik">IK</a>.</p>
        <br>
        <b>#</b> 2021年04月30日<br>
        <b>#</b> 分类:&nbsp;&nbsp;<a href="/category/技术.html">技术</a><br>
        
            <b>#</b> 标签:&nbsp;
            
                <a href="/tag/Elasticsearch.html">Elasticsearch</a>&nbsp;&nbsp;
            
                <a href="/tag/Docker.html">Docker</a>&nbsp;&nbsp;
            
                <a href="/tag/技术笔记.html">技术笔记</a>&nbsp;&nbsp;
            
        
    </article>

</main>


    <footer>
    <br>
    &copy; 2023 CHENN · <a href="mailto:intbleem@gmail.com">Email</a>&nbsp;&nbsp;·
    <a href="/links.html">Links</a>&nbsp;&nbsp;·
    <a href="/feed.xml">RSS</a>
    <br>
    <br>
</footer>




</body>
</html>